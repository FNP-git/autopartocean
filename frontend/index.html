<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/tab-logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="manual vehicle, automatic transmission repair near me, manual sports car, places that rebuild motors, racing parts, automotive performance parts, auto transmission repair near me, used engines, used auto parts online, salvage car parts, remanufactured transmission, transmission service near me, engine replacement cost, 4x4 transmission, automotive automatic transmission, rebuilt engine for sale">
    <meta name="description" content="Buy high-quality used engines and transmissions at unbeatable prices from AutoPartOcean. Over 300,000 low-mileage gas and diesel parts for cars, trucks, and SUVs. Fast shipping, expert support, and guaranteed fitment.">

    <!-- Content Security Policy for Production -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://bat.bing.com https://embed.tawk.to https://js.tawk.to; connect-src 'self' https://www.google-analytics.com https://analytics.google.com https://bat.bing.com wss://*.tawk.to https://*.tawk.to; frame-src https://*.tawk.to;">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Blinker:wght@100;200;300;400;600;700;800;900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./index.css">
    <title>Used Engines and Transmissions , Trusted sellers at Autopartocean</title>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>

    <!-- üöÄ Lazy-load Google Analytics (G-96MTEX2MEN) + Google Ads (AW-17046619258) -->
    <script>
      setTimeout(() => {
        const gtagScript = document.createElement('script');
        gtagScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-96MTEX2MEN';
        gtagScript.async = true;
        document.head.appendChild(gtagScript);

        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());

        // ‚úÖ Google Analytics 4
        gtag('config', 'G-96MTEX2MEN');

        // ‚úÖ Google Ads
        gtag('config', 'AW-17046619258');
      }, 3000);
    </script>

    <!-- üöÄ Lazy-load Bing UET -->
    <script>
      setTimeout(() => {
        (function(w,d,t,r,u){
          var f,n,i;
          w[u]=w[u]||[],f=function(){
            var o={ti:"97183444", enableAutoSpaTracking: true};
            o.q=w[u],w[u]=new UET(o),w[u].push("pageLoad");
          },
          n=d.createElement(t),n.src=r,n.async=1,
          n.onload=n.onreadystatechange=function(){
            var s=this.readyState;
            s && s!=="loaded" && s!=="complete" || (f(),n.onload=n.onreadystatechange=null);
          },
          i=d.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i);
        })(window,document,"script","https://bat.bing.com/bat.js","uetq");
      }, 3000);
    </script>

    <!-- ‚úÖ Production-Ready Tawk.to Script with Error Handling -->
    <script type="text/javascript">
      (function() {
        // Initialize Tawk_API and LoadStart
        var Tawk_API = Tawk_API || {};
        var Tawk_LoadStart = new Date();
        
        // Make them globally available
        window.Tawk_API = Tawk_API;
        window.Tawk_LoadStart = Tawk_LoadStart;

        // Function to load Tawk.to
        function loadTawkTo() {
          try {
            var s1 = document.createElement("script");
            var s0 = document.getElementsByTagName("script")[0];
            
            s1.async = true;
            s1.src = 'https://embed.tawk.to/68829ae98c349d19252c73ee/1j0v2q8jr';
            s1.charset = 'UTF-8';
            s1.setAttribute('crossorigin', '*');
            
            // Add error handling
            s1.onload = function() {
              console.log('‚úÖ Tawk.to loaded successfully');
            };
            
            s1.onerror = function() {
              console.error('‚ùå Failed to load Tawk.to script');
            };
            
            s0.parentNode.insertBefore(s1, s0);
            
            // Optional: Configure Tawk.to after load
            Tawk_API.onLoad = function() {
              console.log('Tawk.to widget is ready');
              
              // Ensure proper positioning
              setTimeout(function() {
                var tawkContainer = document.querySelector('div[id*="tawk"]');
                if (tawkContainer) {
                  tawkContainer.style.position = 'fixed';
                  tawkContainer.style.bottom = '20px';
                  tawkContainer.style.right = '20px';
                  tawkContainer.style.zIndex = '2147483647';
                }
              }, 1000);
            };
            
          } catch (error) {
            console.error('Error initializing Tawk.to:', error);
          }
        }

        // Load Tawk.to after DOM is ready
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', loadTawkTo);
        } else {
          loadTawkTo();
        }
      })();
    </script>

    <!-- üîß Tawk.to Positioning CSS -->
    <style>
      /* Force Tawk.to widget positioning */
      div[id*="tawk"] {
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        z-index: 2147483647 !important;
      }
      
      iframe[src*="tawk.to"],
      iframe[title*="chat widget"] {
        position: fixed !important;
        bottom: 0 !important;
        right: 0 !important;
        z-index: 2147483647 !important;
        border: none !important;
      }
      
      /* Mobile responsive */
      @media (max-width: 768px) {
        div[id*="tawk"] {
          bottom: 10px !important;
          right: 10px !important;
        }
      }
      
      /* Ensure widget is visible */
      div[id*="tawk"]:not([style*="display: none"]) {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
      }
    </style>

    <!-- üõ†Ô∏è Debug Script (Remove in final production) -->
    <script>
      // Debug function - you can remove this in final production
      window.debugTawkTo = function() {
        console.log('üîç Tawk.to Debug Info:');
        console.log('- Domain:', window.location.hostname);
        console.log('- Tawk_API exists:', !!window.Tawk_API);
        console.log('- Tawk_LoadStart:', window.Tawk_LoadStart);
        console.log('- Tawk script loaded:', !!document.querySelector('script[src*="embed.tawk.to"]'));
        console.log('- Tawk widgets found:', document.querySelectorAll('[id*="tawk"]'));
        console.log('- Network errors:', 'Check Network tab in DevTools');
      };
      
      // Auto-debug after 10 seconds (remove in production)
      setTimeout(function() {
        if (typeof window.debugTawkTo === 'function') {
          window.debugTawkTo();
        }
      }, 10000);
    </script>
  </body>
</html>